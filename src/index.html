<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Тестирование</title>
    <link rel="stylesheet" href="index.css" />
  </head>
  <body>
    <h1>Пройдите тест!</h1>
    <h3 id="question">1. Объект информатизации (ОИ):</h3>
    <ul>
      <li><input type="radio" id="ans-1" name="answer" value="1"
        checked>
 <label id="l1" for="ans-1">Совокупность информационных ресурсов, основных технических средств и систем обработки информации, средств обеспечения объекта информатизации, помещений или объектов (зданий, сооружений, средств), в которых они установлены;</label></li>
      <li><input type="radio" id="ans-2" name="answer" value="2">
 <label id="l2" for="ans-2">Совокупность информационных ресурсов и основных технических средств и систем, размещенных в специально оборудованных помещениях, а также на подвижных средствах;</label></li>
      <li><input type="radio" id="ans-3" name="answer" value="3">
 <label id="l3" for="ans-3">Совокупность информационных ресурсов, основных технических средств и систем обработки информации, помещений или объектов (зданий, сооружений, средств), в которых они установлены.</label></li>
    </ul>

    <button onclick="handleButton(this.id)" id="1">Ответить</button>

    <div id="wrong-block" hidden></div>
  </body>
  <script>
    let rightAnswers = [
      '1', '3', '2', '3', '3',
      '3', '1', '3', '1', '3'
    ];

    /**
     * Формат - вопрос, ответ, ответ, ответ
     **/
    let answers = [
      [
        '2. Временный объект информатизации - это:',
        'Совокупность информационных ресурсов и основных технических средств и систем, размещенных в специально оборудованных помещениях, а также на подвижных средствах;',
        'Помещение (служебный кабинет, актовый зал, конференц-зал, аппаратная, кабина (отсек, салон) подвижных средств, полевое инженерное сооружение), предназначенное для обсуждения (воспроизведения) сведений, составляющих государственную тайну, в том числе с применением технических средств;',
        'Объект информатизации, функционирующий (развертываемый) на период проведения мероприятий оперативной деятельности войск, в том числе в полевых условиях (во временных инженерных сооружениях, в аппаратных транспортных средств).'
      ],
      [
        '3. Основными этапами работ по созданию и вводу в эксплуатацию объектов информатизации (объектов ВТ) являются:',
        'Подготовительный; размещение (монтаж) технических средств; выполнение мероприятий по ЗИ от несанкционированного доступа; проверка готовности системы ЗИ объекта ВТ .',
        'Подготовительный; размещение (монтаж) технических средств и выполнение мероприятий по ЗИ от утечки по техническим каналам; выполнение мероприятий по ЗИ от несанкционированного доступа, обучение (инструктаж) личного состава органов ОБИ и пользователей по вопросам ЗИ; проверка готовности системы ЗИ объекта ВТ и издание приказа о вводе объекта ВТ в эксплуатацию и разрешении обработки информации.',
        'Подготовительный; размещение (монтаж) технических средств и выполнение мероприятий по ЗИ от утечки по техническим каналам; выполнение мероприятий по ЗИ от несанкционированного доступа; издание приказа о вводе объекта ВТ в эксплуатацию и разрешении обработки информации.'
      ],
      [
        '4. Акт скрытых работ хранится?',
        'В течение 1 года (с даты окончания строительных работ).',
        'В течение 3 лет (с даты окончания строительных работ).',
        'Совместно с проектной документацией и уничтожается только после вывода объекта ВТ из эксплуатации.'
      ],
      [
        '5. Что обязаны делать пользователи, допущенные в установленном порядке к защищаемым ресурсам объекта ВТ?',
        'Использовать средства ЗИ (в том числе криптографические), не включенные в состав объекта информатизации в установленном порядке.',
        'Уметь самостоятельно применять средства защиты информации, антивирусной защиты и электронной подписи.',
        'Знать свои полномочия и права доступа к защищаемым ресурсам объекта информатизации.'
      ],
      [
        '6. Обновление антивирусных баз для автономных средств вычислительной техники осуществляется…',
        'начальником объекта информатизации;',
        'начальником органа ОБИ;',
        'ответственными за взаимодействие с органом ОБИ (ответственным за защиту информации).'
      ],
      [
        '7. Доступ к защищаемым ресурсам объекта информатизации должностных лиц организуется на основании?',
        'Перечня защищаемых ресурсов; таблицы разграничения доступа; заявок на должностных лиц, допускаемых к защищаемым ресурсам: книги закрепления и выдачи идентификаторов доступа и  паролей.',
        'Перечня защищаемых ресурсов; таблицы разграничения доступа; заявок на должностных лиц, допускаемых к защищаемым ресурсам.',
        'Перечня защищаемых ресурсов; таблицы разграничения доступа.'
      ],
      [
        '8. Изменение состава защищаемых ресурсов и их пользователей производится?',
        'Внесения изменений в текущий перечень защищаемых ресурсов.',
        'Переоформлением всей организационно-распорядительной документации на объект ВТ.',
        'Оформления дополнений к перечням защищаемых ресурсов и заявок на должностных лиц.'
      ],
      [
        '9. Кто подписывает и кем утверждается перечень защищаемых ресурсов?',
        'Подписывают члены комиссии, утверждает командир воинской части.',
        'Подписывают члены комиссии, утверждает начальник службы ЗГТ.',
        'Подписывает начальник объекта ВТ, утверждает командир воинской части.'
      ],
      [
        '10. Тип машинных носителей?',
        'Энергонезависимые;',
        'Бумажные;',
        'Энергозависимые, энергонезависимые, бумажные.'
      ],
    ]

    let score = 0;

    let wrongAnswers = [];
    let wrongCounter = 0;

    function handleButton(buttonId)
    {
      
      let q = document.getElementById("question")
      let l1 = document.getElementById("l1")
      let l2 = document.getElementById("l2")
      let l3 = document.getElementById("l3")

      // Получаем оценку за текущий вопрос
      let button = document.getElementById(buttonId);
      id = parseInt(buttonId)
      let rightAnswer = rightAnswers[id - 1]
      let inputs = document.querySelectorAll('input')
      let myAnswer = 0
      inputs.forEach(input => {
        if (input.checked) {
          myAnswer = input.value
        }
      });
      if (rightAnswer == myAnswer) {
        score++
      }
      else {
        if (id == 1) {
          wrongAnswers.push([
            q.textContent,
            myAnswer == 1 ? l1.textContent : myAnswer == 2 ? l2.textContent : l3.textContent,
            rightAnswer == 1 ? l1.textContent : rightAnswer == 2 ? l2.textContent : l3.textContent
          ])
        }
        else {
          wrongAnswers.push([
            answers[id - 2][0],
            answers[id - 2][myAnswer],
            answers[id - 2][rightAnswer]])
        }
      }

      // Меняем информацию на странице
      if (id == 10) {
        // Ставим оценку
        button.hidden = true
        ul = document.getElementsByTagName('ul')[0]
        ul.hidden = true
        h1 = document.getElementsByTagName('h1')[0]
        h1.textContent = 'Тест завершен.'

        let points = 2
        if ((score == 9) || (score == 10)) {
          points = 5
        }
        if (score == 8) {
          points = 4
        }
        if ((score == 7) || (score == 6)) {
          points = 3
        }

        h3 = document.getElementsByTagName('h3')[0]
        h3.textContent = "Количество правильных ответов: " + score.toString() + "/10. Ваша оценка - " + points.toString() + "."
        if (wrongAnswers.length > 0) {
            let wrongDivAll = document.createElement('div')
          wrongAnswers.forEach(questionInfo => {
            let wrongDiv = document.createElement('div')
            let wrongADiv = document.createElement('div')
            wrongADiv.style.color = "red"
            let wrongQ = document.createTextNode("Вопрос: " + questionInfo[0])
            let wrongA = document.createTextNode("Ваш ответ: " + questionInfo[1])
            wrongADiv.appendChild(wrongA)
            let rightA = document.createTextNode("Правильный ответ: " + questionInfo[2])
            let rightADiv = document.createElement('div')
            rightADiv.style.color = "green"
            rightADiv.appendChild(rightA)
            
            wrongDiv.appendChild(wrongQ)
            wrongDiv.appendChild(wrongADiv)
            wrongDiv.appendChild(rightADiv)
            wrongDiv.classList.add("very-wrong-div")
            let hiddenDiv = document.getElementById("wrong-block")
            hiddenDiv.hidden = false
            document.body.insertBefore(wrongDiv, hiddenDiv)
          })
        }
        return
      }
      button.id = id + 1
      q.textContent = answers[id - 1][0]
      l1.textContent = answers[id - 1][1]
      l2.textContent = answers[id - 1][2]
      l3.textContent = answers[id - 1][3]

    }
  </script>
</html>
