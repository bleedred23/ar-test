<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Тестирование</title>
    <link rel="stylesheet" href="index.css" />
  </head>
  <body>
    <h1>Пройдите тест!</h1>
    <h3 id="question">1. В каких случаях на документе под реквизитом грифа секретности проставляется пункт Перечня сведений ВС РФ ,подлежащих засекречиванию?</h3>
    <ul>
      <li><input type="radio" id="ans-1" name="answer" value="1"
        checked>
 <label id="l1" for="ans-1">Если документ имеет гриф секретности особой важности, совершенно секретно, секретно .</label></li>
      <li><input type="radio" id="ans-2" name="answer" value="2">
 <label id="l2" for="ans-2">Если документ имеет гриф секретности особой важности, совершенно секретно.</label></li>
      <li><input type="radio" id="ans-3" name="answer" value="3">
 <label id="l3" for="ans-3">Если документ имеет гриф секретности совершенно секретно,секретно  или ограничительную пометку для служебного пользования.</label></li>
    </ul>

    <button onclick="handleButton(this.id)" id="1">Ответить</button>

    <div id="wrong-block" hidden></div>
  </body>
  <script>
    let rightAnswers = [
      '1', '1', '1', '2', '1',
      '1', '1', '1', '1', '3'
    ];

    /**
     * Формат - вопрос, ответ, ответ, ответ
     **/
    let answers = [
      [
        '2. По какому документу определяется форма допуска к государственной тайне прибывших в командировку представителей других воинских частей?',
        'По справке о допуске к государственной тайне.',
        'По предписанию на выполнение задания.',
        'По командировочному удостоверению.'
      ],
      [
        '3. Ответственность за правильность определения степени секретности сведений, содержащихся в секретных документах и изделиях, и присвоение грифа секретности их носителем несут:',
        'Исполнитель документа и руководитель, их утверждающий или подписывающий.',
        'Исполнитель документа и начальник службы ЗГТ.',
        'Руководитель утверждающий или подписывающий документ и начальник секретного Делопроизводства.'
      ],
      [
        '4. Производства выписок из секретных документов, разработанных воинской части производится?',
        'По устному указанию командира воинской части или его заместителя.',
        'По письменному указанию командира воинской части или его заместителя.',
        'По письменному указанию начальника службы ЗГТ.'
      ],
      [
        '5. Понятие «допуск государственной тайне»?',
        'Допуск к государственной тайне это оформленные в установленном порядке право граждан на доступ к сведениям,составляющим государственную тайну.',
        'Допуск к государственной тайне это санкционированная полномочным должностным лицом ознакомление конкретного работника со сведениями, составляющими государственную тайну.',
        'Доступ к государственной тайне это совокупность требований, правил организационных, технических и иных мер, направленных на сохранность сведений, составляющих государственную тайну.'
      ],
      [
        '6. Об изменении анкетных данных исполнитель обязан информировать?',
        'Кадровый орган.',
        'Службу ЗГТ.',
        'Подразделение секретного Делопроизводства.'
      ],
      [
        '7. Каким приказом МО РФ утверждён Перечень сведений ВС РФ, подлежащих засекречиванию?',
        '2018 г. №080.',
        '2011 г. №011.',
        '2018 г. №010.'
      ],
      [
        '8. Расчёт рассылки секретного документа подписывается?',
        'Командиром воинской части или начальником структурного подразделения, в котором он разработан.',
        'Исполнителем секретного документа.',
        'Начальником службы защиты государственной тайны.'
      ],
      [
        '9. Передачи информации, содержащий сведения, составляющие государственную тайну, сформированной на МНИ, между воинскими частями осуществляется?',
        'По сопроводительным документам.',
        'По книге учёта получения (передачи) файлов.',
        'Без составления сопроводительных документов, по решению исполнителя, сформировавшего информацию.'
      ],
      [
        '10. Передавать и принимать без расписки носители сведений, составляющих государственную тайну?',
        'Разрешается, по указанию начальника структурного подразделения.',
        'Разрешается по указанию начальника штаба воинской части.',
        'Запрещается.'
      ],
    ]

    let score = 0;

    let wrongAnswers = [];
    let wrongCounter = 0;

    function handleButton(buttonId)
    {
      
      let q = document.getElementById("question")
      let l1 = document.getElementById("l1")
      let l2 = document.getElementById("l2")
      let l3 = document.getElementById("l3")

      // Получаем оценку за текущий вопрос
      let button = document.getElementById(buttonId);
      id = parseInt(buttonId)
      let rightAnswer = rightAnswers[id - 1]
      let inputs = document.querySelectorAll('input')
      let myAnswer = 0
      inputs.forEach(input => {
        if (input.checked) {
          myAnswer = input.value
        }
      });
      if (rightAnswer == myAnswer) {
        score++
      }
      else {
        if (id == 1) {
          wrongAnswers.push([
            q.textContent,
            myAnswer == 1 ? l1.textContent : myAnswer == 2 ? l2.textContent : l3.textContent,
            rightAnswer == 1 ? l1.textContent : rightAnswer == 2 ? l2.textContent : l3.textContent
          ])
        }
        else {
          wrongAnswers.push([
            answers[id - 2][0],
            answers[id - 2][myAnswer],
            answers[id - 2][rightAnswer]])
        }
      }

      // Меняем информацию на странице
      if (id == 10) {
        // Ставим оценку
        button.hidden = true
        ul = document.getElementsByTagName('ul')[0]
        ul.hidden = true
        h1 = document.getElementsByTagName('h1')[0]
        h1.textContent = 'Тест завершен.'

        let points = 2
        if ((score == 9) || (score == 10)) {
          points = 5
        }
        if (score == 8) {
          points = 4
        }
        if ((score == 7) || (score == 6)) {
          points = 3
        }

        h3 = document.getElementsByTagName('h3')[0]
        h3.textContent = "Количество правильных ответов: " + score.toString() + "/10. Ваша оценка - " + points.toString() + "."
        if (wrongAnswers.length > 0) {
            let wrongDivAll = document.createElement('div')
          wrongAnswers.forEach(questionInfo => {
            let wrongDiv = document.createElement('div')
            let wrongADiv = document.createElement('div')
            wrongADiv.style.color = "red"
            let wrongQ = document.createTextNode("Вопрос: " + questionInfo[0])
            let wrongA = document.createTextNode("Ваш ответ: " + questionInfo[1])
            wrongADiv.appendChild(wrongA)
            let rightA = document.createTextNode("Правильный ответ: " + questionInfo[2])
            let rightADiv = document.createElement('div')
            rightADiv.style.color = "green"
            rightADiv.appendChild(rightA)
            
            wrongDiv.appendChild(wrongQ)
            wrongDiv.appendChild(wrongADiv)
            wrongDiv.appendChild(rightADiv)
            wrongDiv.classList.add("very-wrong-div")
            let hiddenDiv = document.getElementById("wrong-block")
            hiddenDiv.hidden = false
            document.body.insertBefore(wrongDiv, hiddenDiv)
          })
        }
        return
      }
      button.id = id + 1
      q.textContent = answers[id - 1][0]
      l1.textContent = answers[id - 1][1]
      l2.textContent = answers[id - 1][2]
      l3.textContent = answers[id - 1][3]

    }
  </script>
</html>
