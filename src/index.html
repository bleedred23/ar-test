<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Тестирование</title>
    <link rel="stylesheet" href="index.css" />
  </head>
  <body>
    <h1>Пройдите тест!</h1>
    <h3 id="question">1. Аутентификация - это:</h3>
    <ul>
      <li><input type="radio" id="ans-1" name="answer" value="1"
        checked>
 <label id="l1" for="ans-1">Проверка принадлежности субьекту доступа предъявленного им идентификатора, подтверждение подлинности;</label></li>
      <li><input type="radio" id="ans-2" name="answer" value="2">
 <label id="l2" for="ans-2">Проверка принадлежности обьекту доступа предъявленного им идентификатора, подтверждение подлинности;</label></li>
      <li><input type="radio" id="ans-3" name="answer" value="3">
 <label id="l3" for="ans-3">Совокупность процедур идентификации и авторизации.</label></li>
    </ul>

    <button onclick="handleButton(this.id)" id="1">Ответить</button>

    <div id="wrong-block" hidden></div>
  </body>
  <script>
    let rightAnswers = [
      '1', '3', '3', '1', '1',
      '3', '1', '2', '1', '2'
    ];

    /**
     * Формат - вопрос, ответ, ответ, ответ
     **/
    let answers = [
      [
        '2. Что не наносится на учитываемых машинных носителях информации?',
        'Номер экземпляра.',
        'Учетный номер.',
        'Количество листов.'
      ],
      [
        '3. Что не осуществляется при контроле перемещения машинных носителей информации?',
        'Предоставление права на перемещение машинных носителей информации за пределы контролируемой зоны только тем лицам, которым оно необходимо для выполнения своих должностных обязанностей (функций).',
        'Периодическая проверка наличия машинных носителей информации.',
        'Создание резервных копий машинных носителей информации.'
      ],
      [
        '4. Защищенный машинный носитель информации (ЗМНИ) - это:',
        'Материальный носитель, предназначенный для записи, безопасного хранения и переноса информации с использованием средств вычислительной техники;',
        'Материальный носитель, содержащий информацию, представленную в форме, приспособленной для обработки с использованием средств вычислительной техники;',
        'Материальный носитель, предназначенный для безопасного хранения и переноса информации с использованием средств вычислительной техники.'
      ],
      [
        '5. Вычислительная сеть, объединяющая абонентов внутри большого города, экономического региона, отдельной страны - это:',
        'Региональная сеть;',
        'Локальная сеть;',
        'Муниципальная сеть.'
      ],
      [
        '6. Что не является обязательным условием для создания абонентского пункта сети Интернет в ОВУ, воинской части или организации МО РФ - это:',
        'Установка на все ПЭВМ абонентского пункта сети Интернет средств общесистемного, общего и специального программного обеспечения;',
        'Проведение линии связи от провайдера до места установки абонентского пункта сети Интернет путем включения в централизованный государственный контракт по оснащению линиями связи либо своими силами;',
        'Ввод в эксплуатацию абонентского пункта сети Интернет изданием приказа командира воинской части (руководителя организации) о вводе в эксплуатацию абонентского пункта сети Интернет.'
      ],
      [
        '7. Обязан ли пользователь при использовании АЭП производить необходимые записи в журнале учета принятой отправленной электронной корреспонденции фактов отправки и получения служебных электронных документов?',
        'Обязаны при отсутствии на абонентском пункте средств защиты информации, регистрирующих действия пользователя.',
        'Не обязаны.',
        'Обязаны регистрировать только передаваемые документы.'
      ],
      [
        '8. Решение о создании абонентского пункта СЦДИ принимается...',
        'Начальником Генерального штаба Вооруженных Сил Российской Федерации-первым заместителем Министра обороны Российской Федерации.',
        'Начальниками главных штабов видов Вооруженных Сил, начальниками штабов военных округов, Северного флота, родов войск Вооруженных Сил и руководителями центральных органов военного управления.',
        'Командиром воинской части.'
      ],
      [
        '9. Кого обязано проинформировать лицо, ответственное за работу с адресами электронной почты в случае факта получения в сообщении электронной почты информации ограниченного доступа?',
        'Представителя подразделения ОБИ (службы 3ГТ).',
        'Администратора почтового сервиса МО РФ.',
        'Начальник штаба воинской части.'
      ],
      [
        '10. Что не относится к программно-техническим принципам обеспечения безопасности при использовании социальных сетей Интернет?',
        'Воздержание от использования функций географической привязки и указания координатной информации в персональных мобильных устройствах (приложениях, используемых для доступа социальным сетям) при исполнении обязанностей военной службы.',
        'Установка и регулярное обновление антивирусного и антишпионского программного обеспечения на персональных компьютерах и мобильных устройствах.',
        'Регулярная проверка через поисковые системы наличия информации о себе, своей семье, своей воинской части, а в случае обнаружения таковой - принятие мер по ее удалению.'
      ],
    ]

    let score = 0;

    let wrongAnswers = [];
    let wrongCounter = 0;

    function handleButton(buttonId)
    {
      
      let q = document.getElementById("question")
      let l1 = document.getElementById("l1")
      let l2 = document.getElementById("l2")
      let l3 = document.getElementById("l3")

      // Получаем оценку за текущий вопрос
      let button = document.getElementById(buttonId);
      id = parseInt(buttonId)
      let rightAnswer = rightAnswers[id - 1]
      let inputs = document.querySelectorAll('input')
      let myAnswer = 0
      inputs.forEach(input => {
        if (input.checked) {
          myAnswer = input.value
        }
      });
      if (rightAnswer == myAnswer) {
        score++
      }
      else {
        if (id == 1) {
          wrongAnswers.push([
            q.textContent,
            myAnswer == 1 ? l1.textContent : myAnswer == 2 ? l2.textContent : l3.textContent,
            rightAnswer == 1 ? l1.textContent : rightAnswer == 2 ? l2.textContent : l3.textContent
          ])
        }
        else {
          wrongAnswers.push([
            answers[id - 2][0],
            answers[id - 2][myAnswer],
            answers[id - 2][rightAnswer]])
        }
      }

      // Меняем информацию на странице
      if (id == 10) {
        // Ставим оценку
        button.hidden = true
        ul = document.getElementsByTagName('ul')[0]
        ul.hidden = true
        h1 = document.getElementsByTagName('h1')[0]
        h1.textContent = 'Тест завершен.'

        let points = 2
        if ((score == 9) || (score == 10)) {
          points = 5
        }
        if (score == 8) {
          points = 4
        }
        if ((score == 7) || (score == 6)) {
          points = 3
        }

        h3 = document.getElementsByTagName('h3')[0]
        h3.textContent = "Количество правильных ответов: " + score.toString() + "/10. Ваша оценка - " + points.toString() + "."
        if (wrongAnswers.length > 0) {
            let wrongDivAll = document.createElement('div')
          wrongAnswers.forEach(questionInfo => {
            let wrongDiv = document.createElement('div')
            let wrongADiv = document.createElement('div')
            wrongADiv.style.color = "red"
            let wrongQ = document.createTextNode("Вопрос: " + questionInfo[0])
            let wrongA = document.createTextNode("Ваш ответ: " + questionInfo[1])
            wrongADiv.appendChild(wrongA)
            let rightA = document.createTextNode("Правильный ответ: " + questionInfo[2])
            let rightADiv = document.createElement('div')
            rightADiv.style.color = "green"
            rightADiv.appendChild(rightA)
            
            wrongDiv.appendChild(wrongQ)
            wrongDiv.appendChild(wrongADiv)
            wrongDiv.appendChild(rightADiv)
            wrongDiv.classList.add("very-wrong-div")
            let hiddenDiv = document.getElementById("wrong-block")
            hiddenDiv.hidden = false
            document.body.insertBefore(wrongDiv, hiddenDiv)
          })
        }
        return
      }
      button.id = id + 1
      q.textContent = answers[id - 1][0]
      l1.textContent = answers[id - 1][1]
      l2.textContent = answers[id - 1][2]
      l3.textContent = answers[id - 1][3]

    }
  </script>
</html>
